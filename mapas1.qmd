---
title: "Distribuição de Espécies Vegetais no Brasil - Dados GBIF"
author: "Jeanne Franco"
format: html 
# format: pdf
date: 02/04/25
categories: [Códigos, Mapas, GBIF]
lang: pt
toc: true
---

# Mapas de distribuição de espécies

Mapas de distribuição de espécies são representações geográficas que mostram onde uma determinada espécie ocorre no espaço. Eles são amplamente utilizados em estudos ecológicos, biológicos, biogeográficos, e para conservação de espécies e planejamento ambiental. Esses mapas podem ser construídos de diferentes formas, dependendo da disponibilidade de dados e da escala da análise.

## **Tipos de mapas de distribuição**

1.  **Mapas de ocorrência**: Baseiam-se em registros pontuais da espécie, geralmente obtidos de bancos de dados como GBIF (Global Biodiversity Information Facility) ou de levantamentos de campo.

2.  **Mapas de distribuição potencial**: Utilizam modelagem preditiva, como Modelos de Nicho Ecológico (ex.: MaxEnt), para estimar onde a espécie pode ocorrer com base em variáveis ambientais.

3.  **Mapas de distribuição histórica**: Mostram a distribuição passada de uma espécie, com base em registros fósseis, literatura histórica ou inferências paleoecológicas.

4.  **Mapas de distribuição futura**: Baseiam-se em projeções de mudanças climáticas para prever possíveis deslocamentos na distribuição da espécie ao longo do tempo.

## **Importância dos mapas de distribuição**

-   Identificação de áreas prioritárias para conservação.

-   Monitoramento de espécies ameaçadas.

-   Planejamento de unidades de conservação.

-   Estudo dos impactos das mudanças climáticas e invasão de espécies exóticas.

## **Fontes de dados e ferramentas para construção**

-   **Bancos de dados globais**: GBIF, iNaturalist, SpeciesLink.

-   **SIG (Sistemas de Informação Geográfica)**: QGIS, ArcGIS.

-   **Modelagem de distribuição de espécies**: MaxEnt, Biomod2, ENMTools.

-   **R para análise espacial**: Pacotes como `sf`, `raster`, `terra` e `dismo`.

## Exemplo de um mapa da distribuição de espécies vegetais feito no R

### Passo 1: carregar pacotes necessários:

```{r message=FALSE, warning=FALSE}

# Caso não tenha os pacotes, baixe em seu computador utilizando a função install.packages("nome_pacote")

library(rgbif)
library(dplyr)
library(sf)
library(ggplot2)
library(rnaturalearth)
library(rnaturalearthdata)
library(cols4all)
```

### Passo 2: carregar dados

- Definir lista de espécies para busca dos dados de ocorrência no GBIF

```{r message=FALSE, warning=FALSE}

species_list <- c("Paubrasilia echinata", "Setaria parviflora", 
                  "Achyrocline satureioides", "Bertholletia excelsa", 
                  "Myracrodruon urundeuva")

```

- Função para buscar dados de uma espécie

```{r message=FALSE, warning=FALSE}

get_occ_data <- function(species_name) {
  occ_search(scientificName = species_name, limit = 500)$data %>%
    filter(!is.na(decimalLongitude) & !is.na(decimalLatitude)) %>%
    select(decimalLongitude, decimalLatitude) %>%
    mutate(species = species_name)
}
```

- Buscar dados para todas as espécies

```{r message=FALSE, warning=FALSE}

all_occ_data <- bind_rows(lapply(species_list, get_occ_data))

```

- Converter para objeto sf

```{r message=FALSE, warning=FALSE}

coords_sf_all <- st_as_sf(all_occ_data, coords = c("decimalLongitude", "decimalLatitude"), crs = 4326)

```

- Obter dados das fronteiras dos países

```{r message=FALSE, warning=FALSE}

world <- ne_countries(scale = "medium", returnclass = "sf")

```

- Filtrar para um país específico (por exemplo, Brasil)

```{r message=FALSE, warning=FALSE}

brazil <- world %>% filter(name == "Brazil") 

```

- Filtrar ocorrências para aquelas dentro do Brasil

```{r message=FALSE, warning=FALSE}

coords_sf_brazil <- st_intersection(coords_sf_all, brazil)

```

- Dados biomas

```{r message=FALSE, warning=FALSE}

my_biom <- read_sf("lm_bioma_250.shp") 
head(my_biom, 18)

```

- Ajustar os limites do mapa para focar na América do Sul

```{r message=FALSE, warning=FALSE}

xlim <- c(-81, -36)
ylim <- c(-37, 6.7)   

```